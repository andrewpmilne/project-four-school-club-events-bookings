{% extends "base.html" %}

{% block title %}Cancel Enrollment{% endblock %}

{% block content %}
<h2 id="cancel-enrollment-heading">Cancel an Enrollment</h2>
<p id="cancel-enrollment-instructions">Select an enrollment to cancel:</p>

<ul class="list-group" aria-labelledby="cancel-enrollment-heading">
    {% for enrollment in enrollments %}
    <li class="list-group-item d-flex justify-content-between align-items-center">
        <!-- Child name and club -->
        <span
            aria-label="Enrollment: {{ enrollment.child.first_name }} {{ enrollment.child.surname }} enrolled in {{ enrollment.club.name }}">
            {{ enrollment.child.first_name }} {{ enrollment.child.surname }} - {{ enrollment.club.name }}
        </span>

        <!-- Cancel button as a POST form -->
        <form action="{% url 'enrollment:cancel_enrollment' enrollment.id %}" method="post" style="display:inline;"
            class="cancel-enrollment-form">
            {% csrf_token %}
            <button type="submit" class="btn btn-danger btn-sm cancel-enrollment-btn"
                aria-label="Cancel enrollment for {{ enrollment.child.first_name }} {{ enrollment.child.surname }} in {{ enrollment.club.name }}">
                Cancel
            </button>
        </form>
    </li>
    {% empty %}
    <li class="list-group-item" aria-label="No enrollments found">No enrollments found.</li>
    {% endfor %}
</ul>

<!-- Back button -->
<a href="{% url 'user:parent_dashboard' %}" class="btn btn-secondary mt-3" aria-label="Back to Parent Dashboard">
    Back to Dashboard
</a>

<!-- Cancel confirmation dialog-->
<dialog id="cancelEnrollmentDialog">
    <p>Are you sure you want to cancel the following enrollment?</p>
    <p id="cancelEnrollmentInfo"></p>
    <div class="dialog-buttons">
        <button id="cancelNoBtn">No</button>
        <button id="cancelYesBtn">Yes</button>
    </div>
</dialog>

{% endblock %}